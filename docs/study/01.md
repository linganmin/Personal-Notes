# 负载均衡


## 为什么要使用负载均衡

:::tip
负载均衡是高可用的网络基础架构的关键组件，通常用于将工作负载分布到多个服务器来提高网站、应用、数据库或其他服务的性能和可靠性。
:::

一个不使用负载均衡的Web架构往往是类似下面这样：

![单台web服务器](http://ww1.sinaimg.cn/large/6aedb651gy1fylokrd1f8j21ak0aymyn.jpg)

在这种架构下，用户往往是直接连到Web服务器，如果当前服务器宕机了，我们的网站/服务就挂了，用户自然便无法访问。

因为是单台服务器处理用户请求，如果访问用户量很大或者激增，超过了该机器的性能处理极限，也会出现加载速度慢或者连接失败。

## 使用负载均衡

在用户请求进入Web服务器之前，引入一个负载均衡器，在负载均衡器后面接入至少两台Web服务器便可以解决单台服务器故障时，用户访问不受影响。党产生高并发请求时，还可以给Web服务器集群扩容。达之架构图如下：

![负载均衡](http://ww1.sinaimg.cn/large/6aedb651gy1fylp07adc9j21dg0ksmzt.jpg)

### 使用Nginx进行一个简单的负载均衡的配置

TODO

## 思考

::: warning
当用户访问负载均衡器，再由负载均衡器将请求转发给后端服务器。在这种情况下，单点故障现在转移到负载均衡器上了。怎么解决呢，是不是可以通过引入第二个负载均衡器来缓解？
:::

下面是一个浮动IP的负载均衡架构示意图

![](http://ww1.sinaimg.cn/large/6aedb651gy1fylp7kk4tpj21iw0sqdk0.jpg)
>>>>>>> 01636e7c5367c6ad9d028a0c3901b84811e8e1f0
