# 性能&并发

## Swoole 和 PHP-FPM 的相同和不同之处

> Swoole 和 FPM 都是基于服务器提升 PHP `解析性能`的方案，进程模型是相同的。

### 相同

- 一个 manager 多个 worker
- manager 负责管理接收请求数据，转发数据，管理子进程（拉起和关闭）
- worker 负责处理请求数据

### 不同

- FPM 的 worker 进程是同步阻塞的，Swoole 的 worker 进程是异步非阻塞的
- Swoole http-server 和 FPM 的差异是后者是常住内存的，PHP 程序变成长生命周期，变量和对象在使用请求后不会被销毁，可以复用

:::tip
在 WEB 流程中，最早使用 cgi 协议用于server的通讯，这种方式会导致高并发情况下，会频繁创建、销毁进程，影响性能。之后出现了 fast-cgi ，采用多进程（进程池）来管理，避免进程频繁销毁。后来随着各种复杂的框架（比如 Laravel）的出现，使得每次请求时框架在初始化过程中会频繁创建大量对象，这又在一定程度上会影响性能，所以就出现了 Swoole 这种基于 PHP 的 http-server，可以将 PHP 对象的声明周期常驻内存，避免了重复创建、销毁大量 PHP 对象。（基于 Swoole 的 http-server 可能会导致一些内存泄漏）
:::

## 接口设计：RESETFUL


## 接口设计：幂等


## 高并发下的数据处理


## 换算QBS->机器